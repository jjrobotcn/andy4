{
  "swagger": "2.0",
  "info": {
    "title": "facedetect.proto",
    "version": "version not set"
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/v2/face/detect/from_image": {
      "post": {
        "summary": "FromImage实现对输入图片进行人脸检测，返回检测人脸图片列表",
        "operationId": "FromImage",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/faceRecognitionFromImageResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/faceRecognitionFromImageRequest"
            }
          }
        ],
        "tags": [
          "FaceDetect"
        ]
      }
    },
    "/api/v2/face/detect/on_face_detect": {
      "get": {
        "summary": "OnFaceDetect实现动态检测人脸，流式返回检测人脸图片戳列表",
        "operationId": "OnFaceDetect",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "$ref": "#/x-stream-definitions/faceRecognitionOnFaceDetectResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "interval_millisecond",
            "description": "检测间隔时间(毫秒).",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "with_gender",
            "description": "检测性别.",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          },
          {
            "name": "with_age",
            "description": "检测年龄.",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          },
          {
            "name": "with_position",
            "description": "检测人脸位置.",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          },
          {
            "name": "with_face_crop_width",
            "description": "返回人脸图片戳宽度.",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          }
        ],
        "tags": [
          "FaceDetect"
        ]
      }
    },
    "/api/v2/face/detect/on_face_set_face_detect": {
      "get": {
        "summary": "OnFaceSetFaceDetect实现动态检测人脸并与指定FaceSet进行对比，流式返回检测结果",
        "operationId": "OnFaceSetFaceDetect",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "$ref": "#/x-stream-definitions/faceRecognitionOnFaceSetFaceDetectResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "face_set_id",
            "description": "FaceSet.id.",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "with_face_crop",
            "description": "返回结果是否包含人脸图片戳\nfalse时Response中face数据将为空.",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          },
          {
            "name": "with_gender",
            "description": "检测性别.",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          },
          {
            "name": "with_age",
            "description": "检测年龄.",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          },
          {
            "name": "with_position",
            "description": "检测人脸位置.",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          },
          {
            "name": "interval_millisecond",
            "description": "检测间隔时间(毫秒).",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "confidence_min",
            "description": "最低信任值，小于该值的数据将无效并过滤 [0, 1].",
            "in": "query",
            "required": false,
            "type": "number",
            "format": "float"
          },
          {
            "name": "with_face_crop_width",
            "description": "返回人脸图片戳宽度.",
            "in": "query",
            "required": false,
            "type": "boolean",
            "format": "boolean"
          }
        ],
        "tags": [
          "FaceDetect"
        ]
      }
    }
  },
  "definitions": {
    "faceRecognitionFacePosition": {
      "type": "object",
      "properties": {
        "x": {
          "type": "integer",
          "format": "int64"
        },
        "y": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "人脸中心位置坐标\n坐标由左上角至右下角\n(0,0)   --- (100,0) x\n|\n|\n(0,100) --- (100,100)\ny"
    },
    "faceRecognitionFromImageRequest": {
      "type": "object",
      "properties": {
        "image": {
          "type": "string",
          "format": "byte",
          "title": "检测图片内容"
        },
        "with_gender": {
          "type": "boolean",
          "format": "boolean",
          "title": "检测性别"
        },
        "with_age": {
          "type": "boolean",
          "format": "boolean",
          "title": "检测年龄"
        },
        "with_position": {
          "type": "boolean",
          "format": "boolean",
          "title": "检测人脸位置"
        },
        "with_face_crop_width": {
          "type": "boolean",
          "format": "boolean",
          "title": "返回人脸图片戳宽度"
        }
      }
    },
    "faceRecognitionFromImageResponse": {
      "type": "object",
      "properties": {
        "face_crops": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "byte"
          },
          "title": "检测人脸图片戳列表"
        },
        "genders": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/faceRecognitionGender"
          },
          "title": "检测人脸性别列表"
        },
        "ages": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "int32"
          },
          "title": "检测人脸年龄列表"
        },
        "positions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/faceRecognitionFacePosition"
          },
          "title": "检测人脸坐标列表"
        },
        "face_crop_widths": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "int64"
          },
          "title": "人脸图片戳宽度列表"
        }
      }
    },
    "faceRecognitionGender": {
      "type": "string",
      "enum": [
        "GENDER_UNKNOWN",
        "GENDER_MALE",
        "GENDER_FEMALE"
      ],
      "default": "GENDER_UNKNOWN"
    },
    "faceRecognitionOnFaceDetectResponse": {
      "type": "object",
      "properties": {
        "face_crops": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "byte"
          },
          "title": "检测人脸图片戳列表"
        },
        "genders": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/faceRecognitionGender"
          },
          "title": "检测人脸性别列表"
        },
        "ages": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "int32"
          },
          "title": "检测人脸年龄列表"
        },
        "positions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/faceRecognitionFacePosition"
          },
          "title": "检测人脸坐标列表"
        },
        "face_crop_widths": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "int64"
          },
          "title": "人脸图片戳宽度列表"
        }
      }
    },
    "faceRecognitionOnFaceSetFaceDetectResponse": {
      "type": "object",
      "properties": {
        "confidences": {
          "type": "array",
          "items": {
            "type": "number",
            "format": "float"
          },
          "title": "匹配结果信任值列表 [0, 1.0]"
        },
        "face_tokens": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "检测人脸token列表"
        },
        "face_crops": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "byte"
          },
          "title": "检测人脸图片戳列表"
        },
        "genders": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/faceRecognitionGender"
          },
          "title": "检测人脸性别列表"
        },
        "ages": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "int32"
          },
          "title": "检测人脸年龄列表"
        },
        "positions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/faceRecognitionFacePosition"
          },
          "title": "检测人脸坐标列表"
        },
        "face_crop_widths": {
          "type": "array",
          "items": {
            "type": "integer",
            "format": "int64"
          },
          "title": "人脸图片戳宽度列表"
        }
      }
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "type_url": {
          "type": "string"
        },
        "value": {
          "type": "string",
          "format": "byte"
        }
      }
    },
    "runtimeStreamError": {
      "type": "object",
      "properties": {
        "grpc_code": {
          "type": "integer",
          "format": "int32"
        },
        "http_code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "http_status": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  },
  "x-stream-definitions": {
    "faceRecognitionOnFaceDetectResponse": {
      "type": "object",
      "properties": {
        "result": {
          "$ref": "#/definitions/faceRecognitionOnFaceDetectResponse"
        },
        "error": {
          "$ref": "#/definitions/runtimeStreamError"
        }
      },
      "title": "Stream result of faceRecognitionOnFaceDetectResponse"
    },
    "faceRecognitionOnFaceSetFaceDetectResponse": {
      "type": "object",
      "properties": {
        "result": {
          "$ref": "#/definitions/faceRecognitionOnFaceSetFaceDetectResponse"
        },
        "error": {
          "$ref": "#/definitions/runtimeStreamError"
        }
      },
      "title": "Stream result of faceRecognitionOnFaceSetFaceDetectResponse"
    }
  }
}
