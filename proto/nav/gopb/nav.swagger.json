{
  "swagger": "2.0",
  "info": {
    "title": "nav.proto",
    "version": "version not set"
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/v2/nav/auto_charge": {
      "post": {
        "summary": "自动充电\n当前为充电中|充电连接中: 请求类型为charge|charge_preset等待状态为CHARGE_STATUS_CHARGING|CHARGE_STATUS_CONNECTING|CHARGE_STATUS_RELEASED后返回\n当前为充电中|充电连接中: 请求类型为cancel等待状态为CHARGE_STATUS_RELEASED后返回\n当前为已释放: 请求类型为cancel将直接返回CHARGE_STATUS_RELEASED\n当前为已释放: 请求类型为charge|charge_preset等待状态为CHARGE_STATUS_CHARGING后返回\n超时错误: 发送请求后默认60秒后未收到状态更新返回错误描述, 超时时间可在AutoChargeRequest中自定义配置",
        "operationId": "AutoCharge",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/navServiceAutoChargeResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceAutoChargeRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    },
    "/api/v2/nav/delete_routes": {
      "post": {
        "summary": "删除线路",
        "operationId": "DeleteRoutes",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/navServiceDeleteRoutesResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceDeleteRoutesRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    },
    "/api/v2/nav/list_routes": {
      "post": {
        "summary": "获取线路",
        "operationId": "ListRoutes",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/navServiceListRoutesResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceListRoutesRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    },
    "/api/v2/nav/location_reset": {
      "post": {
        "summary": "\u003e=2.2.0\n重置当前定位\n用于发生定位异常/错误状态，重新初始化导航定位\n重定位错误：定位状态超时|无地图|UWB错误\n重定位超时判断: 默认3s，仅在非错误状态下重置\n*目前仅支持无线导航版本，磁导航版本中将直接返回成功状态",
        "operationId": "LocationReset",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/navServiceLocationResetResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceLocationResetRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    },
    "/api/v2/nav/nav_stop": {
      "post": {
        "summary": "停止\n静止: 立即返回STOPPED\n旋转中: 返回旋转状态, STOPPED或CANCEL, 超时3秒\n其它: 错误描述为: \"[moving|charging] reject\"",
        "operationId": "NavStop",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/navServiceNavStopResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceNavStopRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    },
    "/api/v2/nav/nav_to": {
      "post": {
        "summary": "导航\n当机器人处理遥控移动中|充电中|旋转中时, 错误描述为: \"[moving|charging|rotating] reject\"\n当机器人处理空闲或导航状态时, 将收到导航的目标NavTarget与导航或失败状态\n使用目标导航时支持同步异步模式, 参考NavToRequest.sync_mode的参数描述",
        "operationId": "NavTo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/navServiceNavToResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceNavToRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    },
    "/api/v2/nav/new_route": {
      "post": {
        "summary": "新建线路",
        "operationId": "NewRoute",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/navServiceNewRouteResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceNewRouteRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    },
    "/api/v2/nav/on_nav_event_change": {
      "post": {
        "summary": "导航事件监听\n监听导航模块中各类事件的变动更新",
        "operationId": "OnNavEventChange",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "$ref": "#/x-stream-definitions/navServiceOnNavEventChangeResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceOnNavEventChangeRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    },
    "/api/v2/nav/rotate": {
      "post": {
        "summary": "原地旋转\n当旋转完成后返回STOPPED\n当用户使用NavStop中止时将返回CANCEL\n若超时30秒未执行完毕将返回超时错误",
        "operationId": "Rotate",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/navServiceRotateResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceRotateRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    },
    "/api/v2/nav/update_route": {
      "post": {
        "summary": "更新线路信息",
        "operationId": "UpdateRoute",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/navServiceUpdateRouteResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/navServiceUpdateRouteRequest"
            }
          }
        ],
        "tags": [
          "NavController"
        ]
      }
    }
  },
  "definitions": {
    "navServiceAutoChargeEvent": {
      "type": "object",
      "properties": {
        "charge_status_code": {
          "$ref": "#/definitions/navServiceChargeStatusCode"
        }
      }
    },
    "navServiceAutoChargeRequest": {
      "type": "object",
      "properties": {
        "charge": {
          "type": "boolean",
          "format": "boolean",
          "title": "当前已在充电桩附近, 直接开始充电"
        },
        "cancel": {
          "type": "boolean",
          "format": "boolean",
          "title": "取消充电"
        },
        "charge_preset": {
          "type": "boolean",
          "format": "boolean",
          "title": "至设置的第一个预设充电点充电"
        },
        "timeout_sec": {
          "type": "integer",
          "format": "int64",
          "title": "等待充电状态为CHARGE_STATUS_CHARGING的超时配置(秒), 默认60s"
        }
      },
      "title": "充电请求"
    },
    "navServiceAutoChargeResponse": {
      "type": "object",
      "properties": {
        "charge_status_code": {
          "$ref": "#/definitions/navServiceChargeStatusCode"
        }
      },
      "title": "充电状态反馈"
    },
    "navServiceChargeStatusCode": {
      "type": "string",
      "enum": [
        "CHARGE_STATUS_UNKNOWN",
        "CHARGE_STATUS_PREPARING",
        "CHARGE_STATUS_RELEASED",
        "CHARGE_STATUS_CONNECTING",
        "CHARGE_STATUS_CHARGING",
        "CHARGE_STATUS_DISCONNECTING",
        "CHARGE_CONNECT_FAIL",
        "CHARGE_STATUS_NAV_OBSTACLE"
      ],
      "default": "CHARGE_STATUS_UNKNOWN",
      "description": "- CHARGE_STATUS_UNKNOWN: 状态零值\n - CHARGE_STATUS_PREPARING: 准备中\n充电导航: 导航开始/CHARGE_STATUS_NAV_OBSTACLE导航恢复\n - CHARGE_STATUS_RELEASED: 已释放\n充电断开结束完成与未充电时为此状态\n - CHARGE_STATUS_CONNECTING: 充电连接中\n - CHARGE_STATUS_CHARGING: 充电中\n - CHARGE_STATUS_DISCONNECTING: 充电断开中\n - CHARGE_CONNECT_FAIL: 连接失败\n - CHARGE_STATUS_NAV_OBSTACLE: 充电导航过程遇到障碍\n2.2.7新增",
      "title": "充电状态码"
    },
    "navServiceDeleteRoutesRequest": {
      "type": "object",
      "properties": {
        "routes_id": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "navServiceDeleteRoutesResponse": {
      "type": "object"
    },
    "navServiceListRoutesRequest": {
      "type": "object"
    },
    "navServiceListRoutesResponse": {
      "type": "object",
      "properties": {
        "routes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/navServiceRoute"
          }
        }
      }
    },
    "navServiceLocationResetRequest": {
      "type": "object"
    },
    "navServiceLocationResetResponse": {
      "type": "object"
    },
    "navServiceMoveDirection": {
      "type": "string",
      "enum": [
        "RELEASE",
        "FORWARD",
        "BACKWARD",
        "LEFT",
        "RIGHT",
        "LEFT_FORWARD",
        "RIGHT_FORWARD",
        "LEFT_BACKWARD",
        "RIGHT_BACKWARD"
      ],
      "default": "RELEASE",
      "title": "移动方向"
    },
    "navServiceMoveEvent": {
      "type": "object",
      "properties": {
        "status_code": {
          "$ref": "#/definitions/navServiceStatusCode"
        }
      }
    },
    "navServiceMoveResponse": {
      "type": "object",
      "properties": {
        "status_code": {
          "$ref": "#/definitions/navServiceStatusCode"
        }
      }
    },
    "navServiceNavEvent": {
      "type": "object",
      "properties": {
        "status_code": {
          "$ref": "#/definitions/navServiceStatusCode"
        },
        "nav_target": {
          "$ref": "#/definitions/navServiceNavTarget"
        }
      }
    },
    "navServiceNavEventType": {
      "type": "string",
      "enum": [
        "NAV_EVENT_REVERSED",
        "MOVE_EVENT",
        "NAV_EVENT",
        "AUTO_CHARGE_EVENT",
        "ROTATE_EVENT"
      ],
      "default": "NAV_EVENT_REVERSED",
      "title": "导航事件"
    },
    "navServiceNavRoaming": {
      "type": "object",
      "properties": {
        "nav_roaming_type": {
          "$ref": "#/definitions/navServiceRoamingType"
        },
        "wait_sec": {
          "type": "integer",
          "format": "int32"
        },
        "roaming_target_indexes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "order_loop": {
          "type": "boolean",
          "format": "boolean"
        }
      }
    },
    "navServiceNavStopRequest": {
      "type": "object",
      "title": "导航停止请求"
    },
    "navServiceNavStopResponse": {
      "type": "object",
      "properties": {
        "status_code": {
          "$ref": "#/definitions/navServiceStatusCode"
        }
      },
      "title": "导航停止状态"
    },
    "navServiceNavTarget": {
      "type": "object",
      "properties": {
        "index": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      },
      "title": "导航目标信息\n判断顺序为index\u003ename"
    },
    "navServiceNavToRequest": {
      "type": "object",
      "properties": {
        "target": {
          "$ref": "#/definitions/navServiceNavTarget"
        },
        "roaming": {
          "$ref": "#/definitions/navServiceNavRoaming"
        },
        "speed": {
          "type": "integer",
          "format": "int64"
        },
        "sync_mode": {
          "type": "boolean",
          "format": "boolean",
          "title": "同步模式标识\n*false: 当导航开始时立即返回PREPARING, 漫游模式强制为异步\ntrue: 目标模式下当导航STOPPED|CANCEL|ERR*时返回"
        }
      },
      "title": "导航请求"
    },
    "navServiceNavToResponse": {
      "type": "object",
      "properties": {
        "status_code": {
          "$ref": "#/definitions/navServiceStatusCode"
        },
        "target": {
          "$ref": "#/definitions/navServiceNavTarget"
        },
        "is_roaming": {
          "type": "boolean",
          "format": "boolean"
        }
      },
      "title": "导航状态"
    },
    "navServiceNewRouteRequest": {
      "type": "object",
      "properties": {
        "route": {
          "$ref": "#/definitions/navServiceRoute"
        }
      },
      "title": "创建线路请求\nroute.name为空时将创建随机名\nroute.is_active仅允许唯一激活, 若创建线路指定为激活将自动设置此线路为激活\nroute.route_points若为空将自动创建默认数量线路点"
    },
    "navServiceNewRouteResponse": {
      "type": "object",
      "properties": {
        "route": {
          "$ref": "#/definitions/navServiceRoute"
        }
      }
    },
    "navServiceOnNavEventChangeRequest": {
      "type": "object"
    },
    "navServiceOnNavEventChangeResponse": {
      "type": "object",
      "properties": {
        "nav_event_type": {
          "$ref": "#/definitions/navServiceNavEventType"
        },
        "move_event": {
          "$ref": "#/definitions/navServiceMoveEvent"
        },
        "nav_event": {
          "$ref": "#/definitions/navServiceNavEvent"
        },
        "rotate_event": {
          "$ref": "#/definitions/navServiceRotateEvent"
        },
        "auto_charge_event": {
          "$ref": "#/definitions/navServiceAutoChargeEvent"
        }
      }
    },
    "navServiceRoamingType": {
      "type": "string",
      "enum": [
        "ROAMING_TYPE_CONTINUE",
        "ROAMING_TYPE_ORDER",
        "ROAMING_TYPE_RANDOM"
      ],
      "default": "ROAMING_TYPE_CONTINUE",
      "title": "导航漫游方式"
    },
    "navServiceRotateEvent": {
      "type": "object",
      "properties": {
        "status_code": {
          "$ref": "#/definitions/navServiceStatusCode"
        }
      }
    },
    "navServiceRotateRequest": {
      "type": "object",
      "properties": {
        "angle": {
          "type": "integer",
          "format": "int32",
          "title": "基于当前角度的旋转角度参数 左:-180 ~ 右:180"
        },
        "rollback": {
          "type": "boolean",
          "format": "boolean",
          "title": "回滚旋转角度\n回滚角度的记录为更新angle角度值时的当前角度，\n若在旋转过程中更新新角度或再次回滚， 下次回滚角度将记录为当前角度"
        }
      },
      "title": "原地旋转请求"
    },
    "navServiceRotateResponse": {
      "type": "object",
      "properties": {
        "status_code": {
          "$ref": "#/definitions/navServiceStatusCode"
        }
      }
    },
    "navServiceRoute": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "is_active": {
          "type": "boolean",
          "format": "boolean"
        },
        "route_points": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/navServiceRoutePoint"
          }
        }
      },
      "title": "线路数据"
    },
    "navServiceRoutePoint": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "rotate": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "线路点数据"
    },
    "navServiceStatusCode": {
      "type": "string",
      "enum": [
        "UNKNOWN",
        "STOPPED",
        "MOVING",
        "PREPARING",
        "CANCEL",
        "RELEASED",
        "ERR_OBSTACLE",
        "ERR_NOT_READY",
        "ERR_MOTOR_FAIL",
        "ERR_WRONG_TARGET",
        "REJ_MOVING",
        "REJ_NAVING",
        "REJ_CHARGING",
        "REJ_ROTATING"
      ],
      "default": "UNKNOWN",
      "title": "- UNKNOWN: 状态零值, 不使用\n - STOPPED: 停止状态\n遥控移动状态: 已停止\n导航状态: 导航结束\n旋转状态: 旋转结束\n - MOVING: 移动中状态\n遥控移动状态: 遥控移动中\n导航状态: 导航移动中\n旋转状态: 旋转中\n - PREPARING: 准备状态\n导航状态: 导航准备中\n旋转状态: 旋转准备中\n - CANCEL: 用户取消状态\n导航状态: 导航被中止\n旋转状态: 旋转被中止\n - RELEASED: 遥控控制权释放状态\n遥控移动状态: 遥控权限超时释放,\n其它遥控端可接管遥控控制权,\n其它类型操作可接管\n - ERR_OBSTACLE: 遇到障碍物\n遥控移动状态: 遥控移动遇到障碍物\n导航状态: 导航过程中遇到障碍(自动导航方式支持自动避障)\n - ERR_NOT_READY: 未就绪状态\n - ERR_MOTOR_FAIL: 电机错误\n - ERR_WRONG_TARGET: 导航目标错误\n - REJ_MOVING: 操作被拒绝， 当前遥控移动中\n - REJ_NAVING: 操作被拒绝， 当前导航中\n - REJ_CHARGING: 操作被拒绝， 当前充电中\n - REJ_ROTATING: 操作被拒绝， 当前旋转中"
    },
    "navServiceUpdateRouteRequest": {
      "type": "object",
      "properties": {
        "route": {
          "$ref": "#/definitions/navServiceRoute"
        }
      },
      "title": "更新线路请求\nroute.id根据此id获取线路\nroute.name不可为空\nroute.route_points不可为空"
    },
    "navServiceUpdateRouteResponse": {
      "type": "object",
      "properties": {
        "route": {
          "$ref": "#/definitions/navServiceRoute"
        }
      }
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "type_url": {
          "type": "string"
        },
        "value": {
          "type": "string",
          "format": "byte"
        }
      }
    },
    "runtimeStreamError": {
      "type": "object",
      "properties": {
        "grpc_code": {
          "type": "integer",
          "format": "int32"
        },
        "http_code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "http_status": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  },
  "x-stream-definitions": {
    "navServiceMoveResponse": {
      "type": "object",
      "properties": {
        "result": {
          "$ref": "#/definitions/navServiceMoveResponse"
        },
        "error": {
          "$ref": "#/definitions/runtimeStreamError"
        }
      },
      "title": "Stream result of navServiceMoveResponse"
    },
    "navServiceOnNavEventChangeResponse": {
      "type": "object",
      "properties": {
        "result": {
          "$ref": "#/definitions/navServiceOnNavEventChangeResponse"
        },
        "error": {
          "$ref": "#/definitions/runtimeStreamError"
        }
      },
      "title": "Stream result of navServiceOnNavEventChangeResponse"
    }
  }
}
